<header
  class="backdrop-blur-lg transition-all duration-300"
  [class]="headerClasses()"
  [attr.aria-label]="'Main navigation'"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full">
    <div class="flex items-center justify-between h-full">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <a
          href="#"
          class="logo text-2xl font-bold text-slate-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
          [class]="
            isScrolled() ? 'text-slate-900 dark:text-white' : 'text-slate-900 dark:text-white'
          "
        >
          Portfolio
        </a>
      </div>

      <!-- Desktop Navigation -->
      <nav class="hidden md:flex items-center space-x-8">
        <a
          href="#about-section"
          class="px-3 py-2 rounded-md text-sm font-medium transition-colors"
          [class]="
            isScrolled()
              ? 'text-slate-800 dark:text-slate-200 hover:text-slate-900 dark:hover:text-white bg-slate-50/50 dark:bg-slate-800/50'
              : 'text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white'
          "
          (click)="scrollToSection('about-section')"
        >
          About
        </a>
        <a
          href="#experience-section"
          class="px-3 py-2 rounded-md text-sm font-medium transition-colors"
          [class]="
            isScrolled()
              ? 'text-slate-800 dark:text-slate-200 hover:text-slate-900 dark:hover:text-white bg-slate-50/50 dark:bg-slate-800/50'
              : 'text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white'
          "
          (click)="scrollToSection('experience-section')"
        >
          Experience
        </a>
        <a
          href="#hire"
          class="px-3 py-2 rounded-md text-sm font-medium transition-colors"
          [class]="
            isScrolled()
              ? 'text-slate-800 dark:text-slate-200 hover:text-slate-900 dark:hover:text-white bg-slate-50/50 dark:bg-slate-800/50'
              : 'text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white'
          "
          (click)="scrollToSection('hire')"
        >
          Hire Me
        </a>
        <button
          class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors"
          (click)="onViewResume()"
        >
          View Resume
        </button>
      </nav>

      <!-- Controls -->
      <div class="flex items-center space-x-2 sm:space-x-4">
        <!-- Theme Toggle -->
        <button
          type="button"
          class="p-2 rounded-lg transition-colors theme-toggle"
          [class]="
            isScrolled()
              ? 'bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 shadow-md'
              : 'bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-400'
          "
          (click)="toggleTheme($event)"
          (mousedown)="$event.stopPropagation()"
          (pointerdown)="$event.stopPropagation()"
          (touchstart)="$event.stopPropagation()"
          [attr.aria-label]="isDark() ? 'Switch to light mode' : 'Switch to dark mode'"
          [attr.aria-pressed]="isDark()"
          style="position: relative; z-index: 10000; pointer-events: auto !important"
        >
          @if (!isDark()) {
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
              ></path>
            </svg>
          } @else {
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
              ></path>
            </svg>
          }
        </button>

        <!-- Mobile Menu Button -->
        <button
          type="button"
          class="md:hidden p-2 rounded-lg transition-colors"
          [class]="
            isScrolled()
              ? 'bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 shadow-md'
              : 'bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-400'
          "
          (click)="toggleMobileMenu()"
          [attr.aria-label]="isMobileMenuOpen() ? 'Close menu' : 'Open menu'"
          [attr.aria-expanded]="isMobileMenuOpen()"
        >
          @if (isMobileMenuOpen()) {
            <!-- Close Icon (X) -->
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              ></path>
            </svg>
          } @else {
            <!-- Hamburger Icon -->
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          }
        </button>
      </div>
    </div>
  </div>
</header>

<!-- Mobile Menu Overlay - Outside header for proper z-index stacking -->
@if (isMobileMenuOpen()) {
  <div
    class="md:hidden fixed inset-0 z-[10002] bg-black/50 backdrop-blur-sm animate-fade-in"
    (click)="closeMobileMenu()"
    style="
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
    "
  >
    <div
      class="fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-white dark:bg-slate-900 shadow-2xl overflow-y-auto animate-slide-in-right"
      [style.transform]="'translateX(0)'"
      style="
        position: fixed !important;
        top: 0 !important;
        right: 0 !important;
        height: 100vh !important;
        z-index: 10003 !important;
      "
      (click)="$event.stopPropagation()"
    >
      <div class="p-6">
        <!-- Close button -->
        <div class="flex justify-between items-center mb-8">
          <h2 class="text-xl font-bold text-slate-900 dark:text-white">Menu</h2>
          <button
            type="button"
            class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-400 transition-colors"
            (click)="closeMobileMenu()"
            aria-label="Close menu"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              ></path>
            </svg>
          </button>
        </div>

        <!-- Navigation links -->
        <nav class="space-y-2">
          <a
            href="#about-section"
            class="block px-4 py-3 rounded-lg text-base font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"
            (click)="scrollToSectionAndClose('about-section'); $event.preventDefault()"
          >
            About
          </a>
          <a
            href="#experience-section"
            class="block px-4 py-3 rounded-lg text-base font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"
            (click)="scrollToSectionAndClose('experience-section'); $event.preventDefault()"
          >
            Experience
          </a>
          <a
            href="#hire"
            class="block px-4 py-3 rounded-lg text-base font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"
            (click)="scrollToSectionAndClose('hire'); $event.preventDefault()"
          >
            Hire Me
          </a>
          <button
            type="button"
            class="w-full mt-4 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-base font-medium transition-colors"
            (click)="onViewResume(); closeMobileMenu()"
          >
            View Resume
          </button>
        </nav>
      </div>
    </div>
  </div>
}
